------------------------------------------------------------------------------
Rask
----
Rask provides state machine based task system with persistence of data.
------------------------------------------------------------------------------


= Raskとは = 



Rask はステートマシンとして振舞うタスクシステムを作るために設計された
ruby 用のライブラリです。
各タスクの状態や固有のデータは自動的に永続化されるため、web サイトのバックエンド
サービスなどの構築に向いています。



= 更新履歴 =



version 0.00
ファイルベースで永続化



= 使い方 =

1. まず、ライブラリ読めるところに放り込んでください。

2. Rask::Taskを継承してタスクを定義してください
   Task はステートマシンとして振舞います。
   ステートマシンを定義するために define_state を用います
   
[sample code]---------------------------------------------


require 'rask'

#
# 数値のカウントアップ 100 までカウントする
# タスクの定義
#
class CountupTask < Rask::Task
  define_state :start,   :initial => true       # 初期状態
  define_state :running                         # 実行
  define_state :finish,  :from    => [:running] # 終了 (遷移元は:runningからのみ)
  
  def start
    @count = 0
    print "start\n"
    transition_to_running # :running へ遷移
  end
  
  def running
    @count += 1
    print "count #{@count} \n"
    transition_to_finish if @count>=100 # :finish へ遷移
  end
  
  def finish
    print "finished\n"
    destroy # タスクの破棄
  end
  
end



# タスクを動かす

task = CountupTask.new # タスクの作成
Rask.insert task       # タスクの登録

while !Rask.tasks.empty?
  # 登録されているタスクを実行
  Rask.each { |task|
    task.run
  }
end

# :running中に処理をとめて、タスク実行だけ再度行うと
# 処理の途中から再開する。


# 今後、書き足し書き足ししていきます



[/sample code]---------------------------------------------



= ライセンス =

Copyright (c) 2010, mewlist
All rights reserved.

  ソースコード形式かバイナリ形式か、変更するかしないかを問わず、以下の条件を満
たす場合に限り、再頒布および使用が許可されます。

- ソースコードを再頒布する場合、上記の著作権表示、本条件一覧、および下記免責条
  項を含めること。 
- バイナリ形式で再頒布する場合、頒布物に付属のドキュメント等の資料に、上記の著
  作権表示、本条件一覧、および下記免責条項を含めること。 
" 書面による特別の許可なしに、本ソフトウェアから派生した製品の宣伝または販売促
  進に、mewlist の名前またはコントリビューターの名前を使用してはならない。 

本ソフトウェアは、著作権者およびコントリビューターによって「現状のまま」提供さ
れており、明示黙示を問わず、商業的な使用可能性、および特定の目的に対する適合性
に関する暗黙の保証も含め、またそれに限定されない、いかなる保証もありません。著
作権者もコントリビューターも、事由のいかんを問わず、損害発生の原因いかんを問わ
ず、かつ責任の根拠が契約であるか厳格責任であるか（過失その他の）不法行為である
かを問わず、仮にそのような損害が発生する可能性を知らされていたとしても、本ソフ
トウェアの使用によって発生した（代替品または代用サービスの調達、使用の喪失、デ
ータの喪失、利益の喪失、業務の中断も含め、またそれに限定されない）直接損害、間
接損害、偶発的な損害、特別損害、懲罰的損害、または結果損害について、一切責任を
負わないものとします。 


